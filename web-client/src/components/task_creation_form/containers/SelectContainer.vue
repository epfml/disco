<template>
  <VeeField
    :id="props.field.id"
    v-slot="{ value }"
    as="select"
    :name="props.field.id"
    :select="props.field.type === 'select-multiple'"
    :multiple="props.field.type === 'select-multiple'"
    class="
      bg-gray-100 rounded-md border p-2 mt-1
      block w-full
      text-gray-700
      focus:outline-none focus:border-disco-cyan
    "
  >
    <option
      v-for="option in props.field.options"
      :key="typeof option === 'string' ? option : option.name"
      :value="typeof option === 'string' ? option.split(' ')[0].toLowerCase() : option.value"
      :selected="value !== undefined && (value as unknown[]).includes(typeof option === 'string' ? option.split(' ')[0].toLowerCase() : option.value)"
    >
      {{ typeof option === 'string' ? option : option.name }}
    </option>
  </VeeField>
</template>

<script lang="ts" setup>
import { defineProps } from 'vue'
import { Field as VeeField } from 'vee-validate'

import { FormField } from '@/creation_form'

interface Props {
  field: FormField
}
const props = defineProps<Props>()
</script>
